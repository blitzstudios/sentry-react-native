{"version":3,"file":"modulesloader.js","sourceRoot":"","sources":["../../../src/js/integrations/modulesloader.ts"],"names":[],"mappings":";AAEA,OAAO,EAAE,MAAM,EAAE,MAAM,YAAY,CAAC;AAEpC,mDAAmD;AACnD,MAAM,OAAO,aAAa;IAA1B;QAME;;WAEG;QACI,SAAI,GAAW,aAAa,CAAC,EAAE,CAAC;IAuBzC,CAAC;IArBC;;OAEG;IACI,SAAS,CAAC,uBAAoD;QACnE,IAAI,OAAO,GAAG,KAAK,CAAC;QACpB,IAAI,OAAsC,CAAC;QAE3C,uBAAuB,CAAC,CAAO,KAAY,EAAE,EAAE;YAC7C,IAAI,CAAC,OAAO,EAAE;gBACZ,OAAO,GAAG,MAAM,MAAM,CAAC,YAAY,EAAE,CAAC;gBACtC,OAAO,GAAG,IAAI,CAAC;aAChB;YACD,IAAI,OAAO,EAAE;gBACX,KAAK,CAAC,OAAO,mCACR,KAAK,CAAC,OAAO,GACb,OAAO,CACX,CAAC;aACH;YACD,OAAO,KAAK,CAAC;QACf,CAAC,CAAA,CAAC,CAAC;IACL,CAAC;;AA9BD;;GAEG;AACW,gBAAE,GAAW,eAAe,CAAC","sourcesContent":["import { Event,EventProcessor, Integration } from '@sentry/types';\n\nimport { NATIVE } from '../wrapper';\n\n/** Loads runtime JS modules from prepared file. */\nexport class ModulesLoader implements Integration {\n  /**\n   * @inheritDoc\n   */\n  public static id: string = 'ModulesLoader';\n\n  /**\n   * @inheritDoc\n   */\n  public name: string = ModulesLoader.id;\n\n  /**\n   * @inheritDoc\n   */\n  public setupOnce(addGlobalEventProcessor: (e: EventProcessor) => void): void {\n    let isSetup = false;\n    let modules: Record<string, string> | null;\n\n    addGlobalEventProcessor(async (event: Event) => {\n      if (!isSetup) {\n        modules = await NATIVE.fetchModules();\n        isSetup = true;\n      }\n      if (modules) {\n        event.modules = {\n          ...event.modules,\n          ...modules,\n        };\n      }\n      return event;\n    });\n  }\n}\n"]}